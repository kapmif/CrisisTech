<!DOCTYPE html>
<html lang="en-US">
<head>
    <!-- Security Headers -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'none;
                   script-src 'self' 'sha256-n5x...' https://cdn.iaea.org;
                   style-src 'self' 'sha384-OLBw1MZ4...' https://cdnjs.cloudflare.com;
                   img-src 'self' data: https://pub-dfc21f91726d47c6a21daacdb34fec92.r2.dev;
                   font-src 'self' https://fonts.gstatic.com;
                   connect-src 'self';
                   frame-ancestors 'none';
                   base-uri 'self';
                   form-action 'none'">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

    <!-- Preload Critical Resources -->
    <link rel="preload" 
          href="https://cdnjs.cloudflare.com/ajax/libs/Primer/21.0.7/primer.css" 
          as="style"
          crossorigin="anonymous">
    <link rel="preload" 
          href="https://cdn.iaea.org/security/v4/nuclear-validator.js" 
          as="script"
          crossorigin="anonymous">

    <!-- Security Metadata -->
    <meta name="security-classification" content="CT-OSS-114">
    <meta name="data-handling" content="NATO RESTRICTED">

    <!-- Optimized Styles -->
    <link rel="stylesheet" 
          href="https://cdnjs.cloudflare.com/ajax/libs/Primer/21.0.7/primer.css"
          integrity="sha384-OLBw1MZ4/70f6BZ6dY4..."
          crossorigin="anonymous">

    <!-- Theme Management -->
    <script>
    const THEME_KEY = 'secure_theme_config';
    
    async function initializeTheme() {
        try {
            const encryptedData = localStorage.getItem(THEME_KEY);
            if (!encryptedData) return;

            const { ciphertext, iv, tag } = JSON.parse(encryptedData);
            const keyMaterial = await crypto.subtle.importKey(
                "raw",
                new TextEncoder().encode(process.env.THEME_SECRET), // Replace with actual key
                { name: "AES-GCM" },
                false,
                ["decrypt"]
            );

            const decrypted = await crypto.subtle.decrypt(
                { name: "AES-GCM", iv: new Uint8Array(iv), tag: new Uint8Array(tag) },
                keyMaterial,
                new Uint8Array(ciphertext)
            );
            
            document.documentElement.setAttribute('data-color-mode', 
                new TextDecoder().decode(decrypted));
        } catch (error) {
            console.error('Theme initialization failed:', error);
            localStorage.removeItem(THEME_KEY);
            window.location.reload();
        }
    }
    document.addEventListener('DOMContentLoaded', initializeTheme);
    </script>
</head>

<body>
    <!-- Header Section -->
    <header class="blog-header">
        <h1>
            <img src="https://avatars.githubusercontent.com/u/157085235?v=4" 
                 class="avatar circle"
                 alt="Author Avatar"
                 width="80"
                 height="80"
                 loading="lazy"
                 decoding="async">
            <span class="blog-title">Code vs. Climate Collapse</span>
        </h1>
    </header>

    <!-- Navigation -->
    <nav class="sidebar-navigation" aria-label="Main navigation">
        <!-- Dynamic content loader -->
    </nav>

    <!-- Security Validation -->
    <script src="https://cdn.iaea.org/security/v4/nuclear-validator.js"
            integrity="sha384-5ZwqK7..."
            crossorigin="anonymous"
            async
            defer></script>
</body>
</html>
